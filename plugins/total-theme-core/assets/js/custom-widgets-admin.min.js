!function(o){"use strict";o(document).ready(function(){function e(){o("#widgets-right .wpex-social-widget-services-list, .customize-control .wpex-social-widget-services-list").each(function(){var e=o(this).attr("id"),i=o("#"+e);i.sortable({placeholder:"placeholder",opacity:.6,update:function(e,t){void 0!==wp.customize?i.find("input.ui-sortable-handle").trigger("change"):i.find("input.wpex-social-widget-services-hidden-field").trigger("change")}})})}function t(){o("#widgets-right .wpex-widget-settings-form .wpex-repeater-field, .customize-control .wpex-widget-settings-form .wpex-repeater-field").each(function(){var e=o(this).attr("id"),i=o("#"+e);i.sortable({revert:!1,delay:100,cursor:"move",placeholder:"wpex-rpf-placeholder",opacity:.8,start:function(e,t){t.placeholder.height(t.item.height())},update:function(e,t){i.find("input").eq(0).trigger("change")}})})}function i(){var n=!0,d=wp.media.editor.send.attachment;o(document).on("click",".wpex-widget-settings-form .wpex-upload-button",function(){window.wpActiveEditor=null;wp.media.editor.send.attachment;var i=o(this).prev();return n=!0,wp.media.editor.send.attachment=function(e,t){if(!n)return d.apply(this,[e,t]);i.val(t.id).trigger("change")},wp.media.editor.open(),!1}),o(".add_media").on("click",function(){n=!1})}e(),o(document).on("widget-updated",e),o(document).on("widget-added",e),o("body").on("click",".wpex-widget-settings-form .wpex-rpf-add",function(e){e.preventDefault();var t=o(this).closest(".wpex-widget-settings-form"),i=t.find(".wpex-rpf-clone"),n=o("<li>"+i.html()+"</li>");t.find(".wpex-repeater-field").append(n),n.find("p").eq(0).find("input").eq(0).focus()}),o("body").on("click",".wpex-widget-settings-form .wpex-rpf-remove",function(e){e.preventDefault(),confirm(wpexCustomWidgets.confirm)&&(o(this).parent().find('input[type="text"]').trigger("change"),o(this).closest("li").remove())}),t(),o(document).on("widget-updated",t),o(document).on("widget-added",t),i(),o(document).on("widget-updated",i),o(document).on("widget-added",i)})}(jQuery);